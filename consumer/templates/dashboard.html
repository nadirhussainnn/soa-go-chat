<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Go Chat - Dashboard</title>
    <link rel="stylesheet" href="/static/index.css">
    <link rel="stylesheet" href="/static/dashboard.css">
</head>
<body>
    <!-- Include Header -->
    {{ template "dashboard_header.html" }}

    <!-- Main Content -->
    <div class="contact-chat-container">
        <!-- Contact List -->
        <div class="contact-list">
            <div class="search-component">
                <input type="text" id="search" placeholder="Search contacts">
            </div>
            <ul id="contact-list" class="list-items">
                <!-- Contacts will be dynamically rendered here -->
            </ul>
        </div>

        <!-- Chat Container -->
        <div class="chat-container">
            {{ template "chat.html" }}
        </div>
    </div>

    <script>
        // Sample data for contacts
        const contacts = [
            { id: 1, name: 'User 1' },
            { id: 2, name: 'User 2' },
            { id: 3, name: 'User 3' }
        ];

        const contactListElement = document.getElementById('contact-list');
        const chatHeaderElement = document.querySelector('.chat-header .username');
        const chatMessagesElement = document.querySelector('.chat-messages');

        // Render contacts
        function renderContacts(contacts) {
            contactListElement.innerHTML = '';
            contacts.forEach(contact => {
                const li = document.createElement('li');
                li.className = 'list-item';
                li.dataset.contactId = contact.id;
                li.innerHTML = `<p class="Username">${contact.name}</p>`;
                li.addEventListener('click', () => loadChat(contact));
                contactListElement.appendChild(li);
            });
        }

        // Load chat for selected contact
        function loadChat(contact) {
            chatHeaderElement.textContent = contact.name; // Update chat header
            chatMessagesElement.innerHTML = ''; // Clear previous messages
            // Add a placeholder for the selected contact's chat
            chatMessagesElement.innerHTML = `<div class="message-bubble received"><p>Welcome to the chat with ${contact.name}!</p></div>`;
        }

        // Search functionality
        const searchInput = document.getElementById('search');
        searchInput.addEventListener('input', (e) => {
            const query = e.target.value.toLowerCase();
            const filteredContacts = contacts.filter(contact => contact.name.toLowerCase().includes(query));
            renderContacts(filteredContacts);
        });

        // Initial render
        renderContacts(contacts);
    </script>
</body>
</html>
